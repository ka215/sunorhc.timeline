(function(W,P){typeof exports=="object"&&typeof module<"u"?P(exports):typeof define=="function"&&define.amd?define(["exports"],P):(W=typeof globalThis<"u"?globalThis:W||self,P(W.Sunorhc={}))})(this,function(W){"use strict";var Tt=Object.defineProperty;var Ct=(W,P,Y)=>P in W?Tt(W,P,{enumerable:!0,configurable:!0,writable:!0,value:Y}):W[P]=Y;var F=(W,P,Y)=>(Ct(W,typeof P!="symbol"?P+"":P,Y),Y);const P="0.9.0",Y=e=>e!==null&&typeof e=="object",ne=e=>typeof e=="string"&&e!==""&&!isNaN(Number(e)),ie=e=>typeof e=="string"&&/^(true|false)$/i.test(e),J=e=>Y(e)&&Object.keys(e).length===0&&e.constructor===Object,xe=e=>/^(https?|ftp):\/\/[^\s/$.?#].[^\s]*$/i.test(e),Me=e=>{const t=/^([a-zA-Z]:\\|\/)/,o=/^(\.\/|\.\.\/|[^:]+\/)/;return t.test(e)||o.test(e)},De=e=>xe(e)||Me(e),Ee=(e,t,o)=>isNaN(e)||o<t?!1:(e=Number(e),(e-t)*(e-o)<=0),ke=e=>{const t=new Map;for(const s of e)t.set(s,(t.get(s)||0)+1);return Array.from(t.entries()).filter(([s,i])=>i>1).map(([s,i])=>s)},ve=(e,...t)=>e.replace(/%([%sdf])/g,(o,s)=>{const i=t.shift();switch(s){case"%":return"%";case"s":return String(i);case"d":case"f":return typeof i=="number"?s==="d"?Math.floor(i).toString():i.toFixed(2):"";default:return""}}),ee=(e="",t=0)=>{let o=3735928559^t,s=1103547991^t;for(let i=0,r;i<e.length;i++)r=e.charCodeAt(i),o=Math.imul(o^r,2654435761),s=Math.imul(s^r,1597334677);return o=Math.imul(o^o>>>16,2246822507),o^=Math.imul(s^s>>>13,3266489909),s=Math.imul(s^s>>>16,2246822507),s^=Math.imul(o^o>>>13,3266489909),4294967296*(2097151&s)+(o>>>0)},B=(e,t)=>{const o={...e};for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(typeof t[s]=="object"&&t[s]!==null&&!Array.isArray(t[s])?typeof o[s]=="object"&&o[s]!==null&&!Array.isArray(o[s])?o[s]=B(o[s],t[s]):o[s]=B({},t[s]):o[s]=t[s]);return o},V=(e,t=new WeakMap)=>{if(e===null||typeof e!="object"||[DOMRect,HTMLElement,DocumentFragment,RegExp,Date].some(i=>e instanceof i))return e;if(t.has(e))return t.get(e);const s=Object.create(Object.getPrototypeOf(e));t.set(e,s);for(const i in e)Object.prototype.hasOwnProperty.call(e,i)&&(s[i]=V(e[i],t));return s},Le=e=>JSON.parse(JSON.stringify(e)),re=(e="UTC",t)=>{const o={year:"numeric",month:"numeric",day:"numeric",hour:"numeric",minute:"numeric",second:"numeric",hour12:!1,timeZone:e};return t&&Object.keys(t).length!==0?{...o,...t}:o},Ae=(e,t="UTC")=>{const o=re(t),s=new Intl.DateTimeFormat(void 0,o),i=`${e.toString().padStart(4,"0")}-01-01T00:00:00${t==="UTC"?".000Z":""}`,a=s.formatToParts(new Date(i)).map(({value:l})=>l).join("")+(t==="UTC"?".000Z":"");let c=new Date(a);return e<100&&(c=new Date(t==="UTC"?c.setUTCFullYear(e):c.setFullYear(e))),c},ae=(e,t=0,o="UTC")=>{let s=o==="UTC"?new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),0,0,0,0)):new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate(),0,0,0,0));e.getFullYear()<100&&(s=new Date(s.setUTCFullYear(e.getFullYear())));const i=Ae(s.getUTCFullYear(),"UTC"),r=i.getUTCDay(),a=Math.floor((s.getTime()-i.getTime())/(24*60*60*1e3))+1,c=(7+(r-t))%7,l=a+c;return Math.ceil(l/7)},Ne=e=>/^([+-]?\d{1,4}[-\/]\d{1,2}[-\/]\d{1,2}(?:[T\s]\d{1,2}:\d{1,2}(?::\d{1,2}(?:\.\d{1,3})?)?(?:Z|[+-]\d{1,2}:\d{1,2})?)?)$/.test(e),O=(e,t,o,s,i=0,r)=>{let a,c=!1,l;if(typeof e=="string")if(Ne(e)){const U=/^((?<_y>[+-]?\d{1,4})[-\/](?<_m>\d{1,2})[-\/](?<_d>\d{1,2})(?:[T\s](?<_h>\d{1,2}):(?<_mi>\d{1,2})(?::(?<_s>\d{1,2})(?:\.(?<_ms>\d{1,3}))?)?(?:(?<_utc>Z)|(?<_tzo>[+-]\d{1,2}:\d{1,2}))?)?)$/.exec(e);U!=null&&U.groups&&(U==null?void 0:U.length)>0&&(c=!!U.groups._utc,U.groups._y.length>2?a=new Date(Date.UTC(Number(U.groups._y),Number(U.groups._m)-1,Number(U.groups._d),Number(U.groups._h||0),Number(U.groups._mi||0),Number(U.groups._s||0),Number(U.groups._ms||0))):(a=new Date(Date.UTC(100,Number(U.groups._m)-1,Number(U.groups._d),Number(U.groups._h||0),Number(U.groups._mi||0),Number(U.groups._s||0),Number(U.groups._ms||0))),a.setUTCFullYear(Number(U.groups._y))))}else l=new Date(e),a=new Date(Date.UTC(l.getFullYear(),l.getMonth(),l.getDate(),l.getHours(),l.getMinutes(),l.getSeconds(),l.getMilliseconds()));else if(typeof e=="number"&&!Number.isNaN(e))a=new Date(e),c=!0;else if(e instanceof Date)l=e,a=new Date(Date.UTC(l.getUTCFullYear(),l.getUTCMonth(),l.getUTCDate(),l.getUTCHours(),l.getUTCMinutes(),l.getUTCSeconds(),l.getUTCMilliseconds())),l.getUTCFullYear()<100&&a.setUTCFullYear(l.getUTCFullYear()),c=!0;else return null;if(Number.isNaN(a.getTime()))return null;(!t||t==="")&&(t="UTC"),(!o||!Array.isArray(o)||o.length==0)&&(o=["January","February","March","April","May","June","July","August","September","October","November","December"]),(!s||!Array.isArray(s)||s.length==0)&&(s=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]);const d=le(a,t)||0,f=Math.floor(d/(60*60*1e3))||0,h=Math.floor((d-f*60*60*1e3)/(60*1e3))||0,u=new Date(a.getTime()+(c?d:0)),n=re(t),p=new Intl.DateTimeFormat(r,n).format(a),[$,x]=p.split(" "),[M,T,w]=$.split("/"),[C,g,y]=x.split(":"),b=parseInt(C,10)-(c?0:f),A=parseInt(g,10)-(c?0:h),S=o[Number(T)-1],D=ae(a,i,t),E=t==="UTC"?s[a.getUTCDay()]:s[a.getDay()],k=t==="UTC"?a.getUTCMilliseconds():a.getMilliseconds();let N=a.toISOString(),_=Math.floor(a.getTime()/1e3);if(t!=="UTC"){const U=`${f<0?"-":"+"}${String(Math.abs(f)).padStart(2,"0")}:${String(Math.abs(h)).padStart(2,"0")}`;N=u.toISOString().replace("Z",U),_=Math.floor(new Date(N).getTime()/1e3)}const q=_+62135596800;return{year:parseInt(M,10),month:parseInt(T,10),monthName:S,day:parseInt(w,10),weekday:E,weeks:D,hours:b,minutes:A,seconds:parseInt(y,10),milliseconds:k,ISO:N,ts:_,cept:q,y:(U=4)=>String(parseInt(M,10)).padStart(U,"0"),m:(U=2)=>String(parseInt(T,10)).padStart(U,"0"),mn:(U=0,I=!1)=>U==0?S:S.substring(0,U)+(I&&U<S.length?".":""),d:(U=2)=>String(parseInt(w,10)).padStart(U,"0"),w:(U=2)=>String(D).padStart(U,"0"),wd:(U=0,I=!1)=>U==0?E:E.substring(0,U)+(I&&U<E.length?".":""),h:(U=2)=>String(b).padStart(U,"0"),mi:(U=2)=>String(A).padStart(U,"0"),s:(U=2)=>String(parseInt(y,10)).padStart(U,"0"),ms:(U=3)=>String(k).padStart(U,"0")}},G=(e,t=null,o=!0)=>{let s=new Date;s=o?new Date(Date.UTC(s.getUTCFullYear(),s.getUTCMonth(),s.getUTCDate(),s.getUTCHours(),s.getUTCMinutes(),s.getUTCSeconds(),0)):new Date(s.getFullYear(),s.getMonth(),s.getDate(),s.getHours(),s.getMinutes(),s.getSeconds(),0);const i=s.valueOf();let r=0,a=0,c=0,l=0,d=0,f=0;try{if(t){const n=t.flags||"",m=new RegExp(t.source,n.includes("g")?n:n+"g"),p=Array.from(e.matchAll(m));if(!p||!p[0].groups)throw new Error("Pattern unmatched");({year:r,month:a,day:c,hours:l,minutes:d,seconds:f}=p[0].groups),r=r?parseInt(r,10):o?s.getUTCFullYear():s.getFullYear(),a=a?parseInt(a,10):o?s.getUTCMonth()+1:s.getMonth()+1,c=c?parseInt(c,10):o?s.getUTCDate():s.getDate(),l=l?parseInt(l,10):o?s.getUTCHours():s.getHours(),d=d?parseInt(d,10):o?s.getUTCMinutes():s.getMinutes(),f=f?parseInt(f,10):o?s.getUTCSeconds():s.getSeconds()}else{const n=new Date(e);if(isNaN(n.getTime()))throw new Error("Invalid date");r=o?n.getUTCFullYear():n.getFullYear(),a=o?n.getUTCMonth()+1:n.getMonth()+1,c=o?n.getUTCDate():n.getDate(),l=o?n.getUTCHours():n.getHours(),d=o?n.getUTCMinutes():n.getMinutes(),f=o?n.getUTCSeconds():n.getSeconds()}if(isNaN(r)||isNaN(a)||isNaN(c)||isNaN(l)||isNaN(d)||isNaN(f))throw new Error("Invalid date components");const u=(o?new Date(Date.UTC(r,a-1,c,l,d,f,0)):new Date(r,a-1,c,l,d,f,0)).valueOf();return i===u}catch(h){return console.error("Failed to parse date in isCurrentDate():",h instanceof Error?h.message:h),!1}},le=(e,t)=>{const o={timeZone:t,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"},i=new Intl.DateTimeFormat([],o).formatToParts(e),r=i.find(p=>p.type==="year"),a=i.find(p=>p.type==="month"),c=i.find(p=>p.type==="day"),l=i.find(p=>p.type==="hour"),d=i.find(p=>p.type==="minute"),f=i.find(p=>p.type==="second");if(!r||!a||!c||!l||!d||!f)throw new Error(`Invalid time zone specified: ${t}`);const h=`${r.value.padStart(4,"0")}-${a.value}-${c.value}T${l.value}:${d.value}:${f.value}`,u=e.toISOString().substring(0,19),n=Date.parse(`${h}Z`),m=Date.parse(`${u}Z`);return n-m},He=(e,t,o)=>{const s=new Date(e);switch(o){case"years":s.setUTCFullYear(s.getUTCFullYear()+t);break;case"months":s.setUTCMonth(s.getUTCMonth()+t);break;case"weeks":s.setUTCDate(s.getUTCDate()+t*7);break;case"days":s.setUTCDate(s.getUTCDate()+t);break;case"hours":s.setUTCHours(s.getUTCHours()+t);break;case"minutes":s.setUTCMinutes(s.getUTCMinutes()+t);break;case"seconds":s.setUTCSeconds(s.getUTCSeconds()+t);break;case"milliseconds":s.setUTCMilliseconds(s.getUTCMilliseconds()+t);break}return s},Pe=(e,t,o,s="UTC")=>{const i=new Date(e),r=le(i,s)||0,a=new Date(i.getTime()-r),c=/.+s$/.test(o)?o:o+"s",l=He(a,t,c);return new Date(l.getTime()+r).getTime()},Z=e=>{let t=String(e).toLowerCase();return t=/s$/i.test(t)?t.slice(0,-1):t,t!==""&&/^(year|month|(week|)(day|)|hour|minute|(milli|)second)$/.test(t)?t:!1},Fe=(e,t,o)=>{switch(o){case"year":t==="UTC"?(e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)):(e.setMonth(0,1),e.setHours(0,0,0,0));break;case"month":t==="UTC"?(e.setUTCDate(1),e.setUTCHours(0,0,0,0)):(e.setDate(1),e.setHours(0,0,0,0));break;case"week":case"weekday":case"day":t==="UTC"?e.setUTCHours(0,0,0,0):e.setHours(0,0,0,0);break;case"hour":t==="UTC"?e.setUTCMinutes(0,0,0):e.setMinutes(0,0,0);break;case"minute":t==="UTC"?e.setUTCSeconds(0,0):e.setSeconds(0,0);break;case"second":t==="UTC"?e.setUTCMilliseconds(0):e.setMilliseconds(0);break}return e},We=(e,t,o)=>{const s=Z(o);if(!s)return new Error(`An unsupported scale was specified: "${o}"`);let i;if(typeof e=="string")if(e.toLowerCase()==="currently"){const r=new Date;let a;t==="UTC"?a=new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())):a=r;const c={year:5,month:6,week:26,weekday:15,day:15,hour:12,minute:30,second:30,millisecond:500};switch(s){case"year":t==="UTC"?a.setUTCFullYear(r.getFullYear()-c[s]):a.setFullYear(r.getFullYear()-c[s]);break;case"month":t==="UTC"?a.setUTCMonth(r.getMonth()-c[s]):a.setMonth(r.getMonth()-c[s]);break;case"week":a.setUTCDate(r.getDate()-c[s]*7);break;case"weekday":case"day":t==="UTC"?a.setUTCDate(r.getDate()-c[s]):a.setDate(r.getDate()-c[s]);break;case"hour":t==="UTC"?a.setUTCHours(r.getHours()-c[s]):a.setHours(r.getHours()-c[s]);break;case"minute":t==="UTC"?a.setUTCMinutes(r.getMinutes()-c[s]):a.setMinutes(r.getMinutes()-c[s]);break;case"second":a.setUTCSeconds(r.getSeconds()-c[s]);break;case"millisecond":t==="UTC"?a.setUTCMilliseconds(r.getMilliseconds()-c[s]):a.setMilliseconds(r.getMilliseconds()-c[s]);break;default:return new Error(`An unsupported scale was specified: "${o}"`)}i=a}else{let r,a=!1;if(/Z|([+-]\d{2}:\d{2})$/.test(e)?(r=new Date(e),a=!0):(r=new Date(e),a=!1),isNaN(r.getTime()))return new Error(`Invalid date strings given: "${e}"`);t==="UTC"?i=a?r:new Date(Date.UTC(r.getUTCFullYear(),r.getUTCMonth(),r.getUTCDate(),r.getUTCHours(),r.getUTCMinutes(),r.getUTCSeconds(),r.getUTCMilliseconds())):i=a?new Date(Date.UTC(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds(),r.getMilliseconds())):r}else{if(!(e instanceof Date)||isNaN(e.getTime()))return new Error("Invalid Date object given");i=e}return Fe(i,t,s)},Ye=(e,t,o,s)=>{const i=Z(o);if(!i)return new Error(`An unsupported scale was specified: "${o}"`);let r;if(typeof e=="string")if(e.toLowerCase()==="auto"){if(!(s instanceof Date))return new Error("Invalid Date object given start date.");const a=new Date(s.getTime()),c={year:10,month:12,week:52,weekday:30,day:30,hour:24,minute:60,second:60,millisecond:1e3};switch(i){case"year":t==="UTC"?a.setUTCFullYear(s.getUTCFullYear()+c[i]):a.setFullYear(s.getFullYear()+c[i]);break;case"month":t==="UTC"?a.setUTCMonth(s.getUTCMonth()+c[i]):a.setMonth(s.getMonth()+c[i]);break;case"week":t==="UTC"?a.setUTCDate(s.getUTCDate()+c[i]*7):a.setDate(s.getDate()+c[i]*7);break;case"weekday":case"day":t==="UTC"?a.setUTCDate(s.getUTCDate()+c[i]):a.setDate(s.getDate()+c[i]);break;case"hour":t==="UTC"?a.setUTCHours(s.getUTCHours()+c[i]):a.setHours(s.getHours()+c[i]);break;case"minute":t==="UTC"?a.setUTCMinutes(s.getUTCMinutes()+c[i]):a.setMinutes(s.getMinutes()+c[i]);break;case"second":t==="UTC"?a.setUTCSeconds(s.getUTCSeconds()+c[i]):a.setSeconds(s.getSeconds()+c[i]);break;case"millisecond":t==="UTC"?a.setUTCMilliseconds(s.getUTCMilliseconds()+c[i]):a.setMilliseconds(s.getMilliseconds()+c[i]);break}r=new Date(a.getTime()-1)}else{let a,c=!1;if(/Z|([+-]\d{2}:\d{2})$/.test(e)?(a=new Date(e),c=!0):(a=new Date(e),c=!1),isNaN(a.getTime()))return new Error(`Invalid date strings given: "${e}"`);t==="UTC"?r=c?a:new Date(Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),a.getUTCDate(),a.getUTCHours(),a.getUTCMinutes(),a.getUTCSeconds(),a.getUTCMilliseconds())):r=c?new Date(Date.UTC(a.getFullYear(),a.getMonth(),a.getDate(),a.getHours(),a.getMinutes(),a.getSeconds(),a.getMilliseconds())):a}else{if(!(e instanceof Date)||isNaN(e.getTime()))return new Error("Invalid Date object given");r=e}return r},te=e=>!(!e||!(e.nodeName||e.prop&&e.attr&&e.find)),R=(e,t)=>{if(!te(e))return!1;const o=e.getBoundingClientRect();return t?o[t]:o},K=(e,t="")=>{const o=e.getAttributeNames();if(o.length!==0){if(t===""){const s={};return o.forEach(i=>{const r=e.getAttribute(i);r!==null?s[i]=ne(r)?Number(r):ie(r)?/^true$/i.test(r):r:s[i]=""}),s}if(o.includes(t)){const s=e.getAttribute(t);return s!==null?ne(s)?Number(s):ie(s)?/^true$/i.test(s):s:""}}},v=(e,t)=>{(Array.isArray(e)?e:[e]).forEach(o=>{for(const s in t)typeof s=="string"&&!/^[-+]?\d+$/.test(s)&&Object.prototype.hasOwnProperty.call(t,s)&&o.setAttribute(s,t[s])})},L=(e,t)=>{(Array.isArray(e)?e:[e]).forEach(o=>{if(typeof t=="object")for(const s in t)Object.prototype.hasOwnProperty.call(t,s)&&(o.style[s]=t[s]);else o.style.cssText=String(t)})},X=(e,t,o=!0)=>{typeof e=="string"&&(e=document.getElementById(e)),e instanceof HTMLElement&&(o?e.textContent=t:e.innerHTML=t)},Re=(e,t,o={})=>{const s=Array.isArray(e)?e:[e];if(!t||typeof t!="function")return;const i={childList:!0,attributes:!0,characterData:!0,subtree:!0,...o};s.forEach(r=>{if(!(r instanceof HTMLElement)){console.error("Watching target is not an HTML element.");return}const a=new MutationObserver(c=>{c.forEach(l=>{t(l,a)})});a.observe(r,i)})};function ze(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var oe={exports:{}};oe.exports,function(e){var t=function(){var o=String.fromCharCode,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",r={};function a(l,d){if(!r[l]){r[l]={};for(var f=0;f<l.length;f++)r[l][l.charAt(f)]=f}return r[l][d]}var c={compressToBase64:function(l){if(l==null)return"";var d=c._compress(l,6,function(f){return s.charAt(f)});switch(d.length%4){default:case 0:return d;case 1:return d+"===";case 2:return d+"==";case 3:return d+"="}},decompressFromBase64:function(l){return l==null?"":l==""?null:c._decompress(l.length,32,function(d){return a(s,l.charAt(d))})},compressToUTF16:function(l){return l==null?"":c._compress(l,15,function(d){return o(d+32)})+" "},decompressFromUTF16:function(l){return l==null?"":l==""?null:c._decompress(l.length,16384,function(d){return l.charCodeAt(d)-32})},compressToUint8Array:function(l){for(var d=c.compress(l),f=new Uint8Array(d.length*2),h=0,u=d.length;h<u;h++){var n=d.charCodeAt(h);f[h*2]=n>>>8,f[h*2+1]=n%256}return f},decompressFromUint8Array:function(l){if(l==null)return c.decompress(l);for(var d=new Array(l.length/2),f=0,h=d.length;f<h;f++)d[f]=l[f*2]*256+l[f*2+1];var u=[];return d.forEach(function(n){u.push(o(n))}),c.decompress(u.join(""))},compressToEncodedURIComponent:function(l){return l==null?"":c._compress(l,6,function(d){return i.charAt(d)})},decompressFromEncodedURIComponent:function(l){return l==null?"":l==""?null:(l=l.replace(/ /g,"+"),c._decompress(l.length,32,function(d){return a(i,l.charAt(d))}))},compress:function(l){return c._compress(l,16,function(d){return o(d)})},_compress:function(l,d,f){if(l==null)return"";var h,u,n={},m={},p="",$="",x="",M=2,T=3,w=2,C=[],g=0,y=0,b;for(b=0;b<l.length;b+=1)if(p=l.charAt(b),Object.prototype.hasOwnProperty.call(n,p)||(n[p]=T++,m[p]=!0),$=x+p,Object.prototype.hasOwnProperty.call(n,$))x=$;else{if(Object.prototype.hasOwnProperty.call(m,x)){if(x.charCodeAt(0)<256){for(h=0;h<w;h++)g=g<<1,y==d-1?(y=0,C.push(f(g)),g=0):y++;for(u=x.charCodeAt(0),h=0;h<8;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1}else{for(u=1,h=0;h<w;h++)g=g<<1|u,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=0;for(u=x.charCodeAt(0),h=0;h<16;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1}M--,M==0&&(M=Math.pow(2,w),w++),delete m[x]}else for(u=n[x],h=0;h<w;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1;M--,M==0&&(M=Math.pow(2,w),w++),n[$]=T++,x=String(p)}if(x!==""){if(Object.prototype.hasOwnProperty.call(m,x)){if(x.charCodeAt(0)<256){for(h=0;h<w;h++)g=g<<1,y==d-1?(y=0,C.push(f(g)),g=0):y++;for(u=x.charCodeAt(0),h=0;h<8;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1}else{for(u=1,h=0;h<w;h++)g=g<<1|u,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=0;for(u=x.charCodeAt(0),h=0;h<16;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1}M--,M==0&&(M=Math.pow(2,w),w++),delete m[x]}else for(u=n[x],h=0;h<w;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1;M--,M==0&&(M=Math.pow(2,w),w++)}for(u=2,h=0;h<w;h++)g=g<<1|u&1,y==d-1?(y=0,C.push(f(g)),g=0):y++,u=u>>1;for(;;)if(g=g<<1,y==d-1){C.push(f(g));break}else y++;return C.join("")},decompress:function(l){return l==null?"":l==""?null:c._decompress(l.length,32768,function(d){return l.charCodeAt(d)})},_decompress:function(l,d,f){var h=[],u=4,n=4,m=3,p="",$=[],x,M,T,w,C,g,y,b={val:f(0),position:d,index:1};for(x=0;x<3;x+=1)h[x]=x;for(T=0,C=Math.pow(2,2),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;switch(T){case 0:for(T=0,C=Math.pow(2,8),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;y=o(T);break;case 1:for(T=0,C=Math.pow(2,16),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;y=o(T);break;case 2:return""}for(h[3]=y,M=y,$.push(y);;){if(b.index>l)return"";for(T=0,C=Math.pow(2,m),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;switch(y=T){case 0:for(T=0,C=Math.pow(2,8),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;h[n++]=o(T),y=n-1,u--;break;case 1:for(T=0,C=Math.pow(2,16),g=1;g!=C;)w=b.val&b.position,b.position>>=1,b.position==0&&(b.position=d,b.val=f(b.index++)),T|=(w>0?1:0)*g,g<<=1;h[n++]=o(T),y=n-1,u--;break;case 2:return $.join("")}if(u==0&&(u=Math.pow(2,m),m++),h[y])p=h[y];else if(y===n)p=M+M.charAt(0);else return null;$.push(p),h[n++]=M+p.charAt(0),u--,M=p,u==0&&(u=Math.pow(2,m),m++)}}};return c}();e!=null?e.exports=t:typeof angular<"u"&&angular!=null&&angular.module("LZString",[]).factory("LZString",function(){return t})}(oe);var _e=oe.exports;const ce=ze(_e),Be=(e,t,o)=>{let s=-1;if(e.hasOwnProperty("row")&&typeof e.row=="number"&&!Number.isNaN(e.row)&&(e.row>=0?s=t.rowHeight*(e.row>0?e.row-1:e.row):s=t.rowHeight*-1),s===-1)if(e.hasOwnProperty("group")){const i=o.sidebar.items.findIndex(r=>r.hasOwnProperty("group")&&r.group===e.group);i!==-1&&(s=t.rowHeight*i)}else s=0;return s},de=(e,t,o)=>{if(J(o)||o.width<=0||o.hasOwnProperty("endDate")&&o.startDate.ts*1e3+o.startDate.milliseconds===o.endDate.ts*1e3+o.endDate.milliseconds)throw new Error("Could not get the coordinate due to illegal range.");const s=o.minScaleWidth;let i=0,r,a=0,c=-1;switch(e.ts*1e3+e.milliseconds<o.startDate.ts*1e3+o.startDate.milliseconds?c=0:e.ts*1e3+e.milliseconds>o.endDate.ts*1e3+o.endDate.milliseconds&&(c=o.width),t){case"year":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate[t]+l,f=s*l,h=new Date(Date.UTC(d,0,1));if(e.year===h.getUTCFullYear()){i=f;break}}if(c===-1){const l=new Date(Date.UTC(e.year,0,1)),f=new Date(Date.UTC(e.year,e.month-1,e.day)).getTime()-l.getTime(),h=(new Date(Date.UTC(e.year+1,0,0)).getTime()-l.getTime())/(24*60*60*1e3)+1;r=f+e.hours*60*60*1e3+e.minutes*60*1e3+e.seconds*1e3+e.milliseconds,a=h*24*60*60*1e3,c=r/a*s+i}break;case"month":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate[t]+l-1,f=s*l,h=new Date(Date.UTC(o.startDate.year,d,1));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1){i=f;break}}if(c===-1){const l=new Date(e.year,e.month,0).getDate(),d=(e.day-1)/l*s;r=e.hours*60*60*1e3+e.minutes*60*1e3+e.seconds*1e3+e.milliseconds,a=r/(l*24*60*60*1e3),c=a*s+d+i}break;case"week":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.day+l*7,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,d)),u=ae(h);if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&Ee(e.weeks,u-1,u+1)){let n=h.getUTCDate();i=f+(e.day-n)/7*s;break}}c===-1&&(r=e.hours*60*60*1e3+e.minutes*60*1e3+e.seconds*1e3+e.milliseconds,a=7*24*60*60*1e3,c=r/a*s+i);break;case"weekday":case"day":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.day+l,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,d));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&e.day===h.getUTCDate()){i=f;break}}c===-1&&(r=e.hours*60*60*1e3+e.minutes*60*1e3+e.seconds*1e3+e.milliseconds,a=24*60*60*1e3,c=r/a*s+i);break;case"hour":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.hours+l,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,o.startDate.day,d));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&e.day===h.getUTCDate()&&e.hours===h.getUTCHours()){i=f;break}}c===-1&&(r=e.minutes*60*1e3+e.seconds*1e3+e.milliseconds,a=60*60*1e3,c=r/a*s+i);break;case"minute":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.minutes+l,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,o.startDate.day,o.startDate.hours,d));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&e.day===h.getUTCDate()&&e.hours===h.getUTCHours()&&e.minutes===h.getUTCMinutes()){i=f;break}}c===-1&&(r=e.seconds*1e3+e.milliseconds,a=60*1e3,c=r/a*s+i);break;case"second":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.seconds+l,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,o.startDate.day,o.startDate.hours,o.startDate.minutes,d));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&e.day===h.getUTCDate()&&e.hours===h.getUTCHours()&&e.minutes===h.getUTCMinutes()&&e.seconds===h.getUTCSeconds()){i=f;break}}c===-1&&(r=e.milliseconds,a=1e3,c=r/a*s+i);break;case"millisecond":for(let l=0;l<Math.ceil(o.width/s);l++){const d=o.startDate.milliseconds+l,f=s*l,h=new Date(Date.UTC(o.startDate.year,o.startDate.month-1,o.startDate.day,o.startDate.hours,o.startDate.minutes,o.startDate.seconds,d));if(e.year===h.getUTCFullYear()&&e.month===h.getUTCMonth()+1&&e.day===h.getUTCDate()&&e.hours===h.getUTCHours()&&e.minutes===h.getUTCMinutes()&&e.seconds===h.getUTCSeconds()&&e.milliseconds===h.getUTCMilliseconds()){console.log(`getPX!!!?::${e.ISO}:`,d,f,h.toISOString(),c),i=f;break}}c===-1&&(c=i);break}return Math.round(c*1e3)/1e3},Xe=(e="md",t)=>{const o=Math.min(t.minScaleWidth,t.rowHeight)/10,s=String(e),i=t.rowHeight-2;let r;switch(s.toLowerCase()){case"xs":r=Math.min(8,Math.floor(o*1.3335));break;case"sm":r=Math.min(12,Math.floor(o*1.8335));break;case"lg":r=Math.max(24,Math.floor(o*3.1628));break;case"xl":r=Math.max(36,Math.floor(o*4.8989));break;default:if(/^[+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?$/.test(s)){const a=Number(s);a<=0?r=Math.min(16,Math.floor(o*2.3428)):r=a<1?Math.floor(a*i):Math.min(a,i)}else r=Math.min(16,Math.floor(o*2.3428));break}return Math.round(r*1e3)/1e3},qe=(e,t,o)=>{var c,l,d,f,h,u;const s=t.scale,i=V(e);i.uid=ee(String(window.performance.now()));const r={width:o.rulerActualWidth,height:o.sidebarHeight,minScaleWidth:Math.floor(o.rulerActualWidth/o.rulerMaxCols),maxRows:o.sidebarItems,rowHeight:o.sidebarItemHeight,startDate:o.startDate,sts:((c=o.startDate)==null?void 0:c.ts)||0,scept:((l=o.startDate)==null?void 0:l.cept)||0,endDate:o.endDate,ets:((d=o.endDate)==null?void 0:d.ts)||0,ecept:((f=o.endDate)==null?void 0:f.cept)||0};if(!i.hasOwnProperty("s")||typeof i.s!="object")return i.x=i.y=-1,i.w=i.h=0,i;const a=Be(i,r,t);if(i.x=de(i.s,s,r),i.h=Math.floor(Xe(i.size||"md",r)*1e3)/1e3,i.hasOwnProperty("end")||(i.h=Math.floor(i.h*1e3)/1e3),i.y=Math.floor((a+Math.floor((r.rowHeight-i.h)/2))*1e3)/1e3,i.hasOwnProperty("end")){const n=((h=t.ruler.filters)==null?void 0:h.monthNames)??void 0,m=((u=t.ruler.filters)==null?void 0:u.dayNames)??void 0,p=t.ruler.firstDayOfWeek||0,$=O(i.end,t.timezone,n,m,p);if($){i.e=$;const x=de(i.e,s,r),M=i.s.ts*1e3+i.s.milliseconds;i.e.ts*1e3+i.e.milliseconds>M&&(x>=r.width?i.w=Math.round((r.width-i.x)*1e3)/1e3:i.w=Math.round((x-i.x)*1e3)/1e3)}else i.w=i.h,i.x<r.width-i.w/2&&(i.x=Math.round((i.x-i.w/2)*1e3)/1e3)}else i.w=i.h,i.x<r.width-i.w/2&&(i.x=Math.round((i.x-i.w/2)*1e3)/1e3);return i},he=(e,t)=>{const o=document.getElementById(e),s=o.querySelectorAll(".sunorhc-timeline-event-node");if(s.length==0)return[];let i=[];Array.from(s).forEach(a=>{const c=a;i.push({id:c.dataset.eventId,type:c.classList.contains("bar-type")?"bar":"pointer",x:c.offsetLeft,y:c.offsetTop,w:c.offsetWidth,h:c.offsetHeight})});let r=null;for(const a in t)switch(a.toLowerCase()){case"latest":t[a]&&(r={id:null,a:0},i.forEach(c=>{r.a<=c.x+c.w&&(r={id:c.id,a:c.x+c.w})}));break;case"id":if(t[a]){const c=new RegExp(`^(EventNode:)?${t[a]}$`,"i");r=i.filter(l=>c.test(l.id))}r=Array.isArray(r)&&r.length>0?r[0]:null;break}return r&&!J(r)?o.querySelector(`.sunorhc-timeline-event-node[data-event-id="${r.id}"]`):r},fe=(e,t)=>{const o=["year","month","week","weekday","day","hour","minute","second","millisecond"],s=o.findIndex(r=>r===e),i=t.filter(r=>s>=o.findIndex(a=>a===Z(r)));return console.log("truncateLowerRulerItems!!!::",e,t,s,i),i},Oe=(e,t,o,s=!1)=>{typeof o=="object"?o=JSON.stringify(o):typeof o!="string"&&(o=String(o));const i=ce.compressToUTF16(o),r=btoa(encodeURIComponent(i));if(window[e].setItem(t,r),s){const a=`${t}:expiration`,c=JSON.stringify({hash:ee(r),cached:new Date().getTime()});window[e].setItem(a,c)}},Ge=(e,t,o=0)=>{const s=window[e].getItem(t);if(!s)return null;if(o>0){const a=`${t}:expiration`,c=window[e].getItem(a);if(c!==null){const l=JSON.parse(c),d=new Date().getTime();if(l.cached+o<d||l.hash!==ee(s))return Ie(e,a,t),null}}const i=decodeURIComponent(atob(s)),r=ce.decompressFromUTF16(i);if(!r)return null;try{return JSON.parse(r)}catch{return r}},Ie=(e,...t)=>{t.forEach(o=>{console.log("removeToStorage:",o,e),window[e].removeItem(o)})},Je=e=>{const t=e.querySelector(".sunorhc-timeline-main-canvas"),o=Array.from(e.querySelectorAll('.sunorhc-timeline-sidebar[data-sidebar-overflow="true"]'));if(t){let s=!1,i,r,a,c;const l=(h,u)=>{s=!0,t.classList.add("draggable"),o.length>0&&o.forEach(n=>n.classList.add("draggable")),i=h-t.offsetLeft,r=u-t.offsetTop,a=t.scrollLeft,c=t.scrollTop},d=()=>{s=!1,t.classList.remove("draggable"),o.length>0&&o.forEach(h=>h.classList.remove("draggable"))},f=(h,u)=>{if(!s)return;const n=h-t.offsetLeft,m=u-t.offsetTop,p=n-i,$=m-r;t.scrollLeft=a-p,o.length>0&&(t.scrollTop=c-$,o.forEach(x=>x.scrollTop=c-$))};t.addEventListener("mousedown",h=>{l(h.pageX,h.pageY)}),t.addEventListener("mouseleave",()=>{d()}),t.addEventListener("mouseup",()=>{d()}),t.addEventListener("mousemove",h=>{s&&(h.preventDefault(),f(h.pageX,h.pageY))}),t.addEventListener("touchstart",h=>{const u=h.touches[0];l(u.clientX,u.clientY)}),t.addEventListener("touchend",()=>{d()}),t.addEventListener("touchcancel",()=>{d()}),t.addEventListener("touchmove",h=>{if(!s)return;h.preventDefault();const u=h.touches[0];f(u.clientX,u.clientY)})}},Ve=e=>{const t=e.querySelector(".sunorhc-timeline-main-canvas"),o=Array.from(e.querySelectorAll('.sunorhc-timeline-sidebar[data-sidebar-overflow="true"]')),s=[t,...o],i=r=>{s.forEach(a=>{r?a.classList.add("wheelable"):a.classList.remove("wheelable")})};if(t){let r=!1;s.forEach(a=>{a.addEventListener("mouseenter",()=>{r=!0,i(r)}),a.addEventListener("mouseleave",()=>{r=!1,i(r)}),a.addEventListener("wheel",d=>{r&&(d.preventDefault(),Array.from(e.querySelectorAll(".wheelable")).forEach(f=>{f instanceof HTMLElement&&f.scrollBy({top:d.deltaY,left:d.deltaX,behavior:"smooth"})}))});let c,l;a.addEventListener("touchstart",d=>{const f=d.touches[0];l=f.clientX,c=f.clientY}),a.addEventListener("touchmove",d=>{if(d.touches.length!==1)return;const f=d.touches[0],h=f.clientX,u=f.clientY,n=l-h,m=c-u;Array.from(e.querySelectorAll(".wheelable")).forEach(p=>{p instanceof HTMLElement&&p.scrollBy({top:m,left:n,behavior:"smooth"})}),l=h,c=u}),a.addEventListener("touchend",()=>{}),a.addEventListener("touchcancel",()=>{})})}},ue=(e,t)=>{if(!e||!/^(\d+|left|begin|center|right|end|current(|ly)|latest)$/.test(String(t)))return;const o=e.querySelector(".sunorhc-timeline-nodes").scrollWidth,s=e.querySelector(".sunorhc-timeline-main-canvas"),i=s.offsetWidth;switch(console.log("Called doAlignment:",t,o,i),t){case"left":case"begin":s.scrollLeft>0&&s.scrollTo({top:0,left:0,behavior:"smooth"});break;case"center":s.scrollLeft>0&&s.scrollTo({left:0});const r=Math.abs(i/2-o/2);s.scrollBy({top:0,left:r,behavior:"smooth"});break;case"right":case"end":s.scrollLeft<o&&s.scrollTo({top:0,left:o,behavior:"smooth"});break;case"current":case"currently":const a=e.querySelector('[data-ruler-grain="min"] > [data-item-present-time="true"]');a&&(s.scrollTo({top:0,left:a.offsetLeft,behavior:"smooth"}),a.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window})));break;case"latest":const c=he(e.id,{latest:!0});c&&(c.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window})),s.scrollTo({top:0,left:c.offsetLeft,behavior:"smooth"}));break;default:const l=he(e.id,{id:t});l&&(l.dispatchEvent(new MouseEvent("mouseover",{bubbles:!0,cancelable:!0,view:window})),s.scrollTo({top:0,left:l.offsetLeft,behavior:"smooth"}));break}},Ke=(e,t)=>{let o=!1;const s=document.createDocumentFragment(),i=e.querySelector(".sunorhc-timeline-main-canvas"),r=Array.from(e.querySelectorAll(".sunorhc-timeline-event-node")),a=R(i);r.forEach(c=>{c.addEventListener("mouseleave",l=>{const d=l.target,f=d.querySelector(".tooltip");f&&d.removeChild(f),o=!1}),c.addEventListener("mouseover",l=>{if(o)return;l.preventDefault();const d=l.target,f=d.dataset.eventId,h=t.filter(u=>u.eventId===f);if(h.length>0){const u=h.shift(),n=R(d),m=document.createElement("div");m.classList.add("tooltip"),L(m,{top:`${n.height/-2}px`,left:`${n.width/-2}px`}),X(m,`<ul>                <li>${u.start} ï½ž ${u.end||"Undefined"}<li>                <li>X: ${u.x}, Width:&nbsp; ${u.w||"Undefined"}</li>                <li>Y: ${u.y}, Height: ${u.h||"Undefined"}</li>                <li>EventId: <span style="color:#f87171;font-weight:600;">${u.eventId}</span></li>                <li>${u.label||"Untitled"}</li>                </ul>`,!1),s.append(m),d.append(s);const p=R(m);let $=(p.width-n.width)/-2;u.x<0&&(u.w+u.x>i.offsetWidth?$=(l.pageX+a.left+i.scrollLeft)/2-u.x:$=n.width-(p.width-l.pageX)/-2);let x=u.h||n.height;L(m,`--tooltip-y: ${x}px; --tooltip-x: ${$}px;`),m.classList.add("shown"),o=!0}})})},Qe=(e,t)=>{var f,h;const o=e.querySelector(".sunorhc-timeline-main-canvas"),s=[...Array.from(o.querySelectorAll(".sunorhc-timeline-ruler")),o.querySelector(".sunorhc-timeline-nodes")];let i=0;const r=(u,n)=>{const m=o.querySelector(".sunorhc-timeline-nodes"),p=u/m.clientWidth,$=O(t.start,t.timezone),M=O(t.end,t.timezone).ts-$.ts,T=(p*M+$.ts)*1e3,w=new Date(T),C=(N,_)=>String(N).padStart(_,"0"),g=w.getUTCFullYear(),y=C(w.getUTCMonth()+1,2),b=C(w.getUTCDate(),2),A=C(w.getUTCHours(),2),S=C(w.getUTCMinutes(),2),D=C(w.getUTCSeconds(),2),E=C(w.getUTCMilliseconds(),3);let k="";switch(n){case"year":k=g.toString();break;case"month":k=`${g}-${y}`;break;case"week":case"weekday":case"day":k=`${g}-${y}-${b}`;break;case"hour":k=`${g}-${y}-${b}T${A}`;break;case"minute":k=`${g}-${y}-${b}T${A}:${S}`;break;case"second":k=`${g}-${y}-${b}T${A}:${S}:${D}`;break;case"millisecond":k=`${g}-${y}-${b}T${A}:${S}:${D}.${E}`;break}return k},a=(u,n)=>{var A;const m=u.target;let p="",$="auto",x=t.scale,M="",T=Number(t.ruler.minGrainWidth);m.nodeName==="LI"?(p=m.dataset.itemDatetime||"",x=Z(((A=m.parentElement)==null?void 0:A.dataset.rulerType)||""),x||(x=t.scale)):(p=r(n,x),console.log("zoomToSetting!!!::",p,$,x));let w=null,C=null,g=null;switch(x){case"year":M="month",p=`${p}-01-01T00:00:00.000`,T=Math.ceil(o.clientWidth/12);break;case"month":if(M="day",w=/^(?<year>\d{1,4})-(?<month>\d{2})$/.exec(p),w&&w.groups){const{year:S,month:D}=w.groups,E=new Date(new Date(Date.UTC(Number(S),Number(D),1,0,0,0)).getTime()-1),k=E.getUTCDate();console.log("!!!:",w,E,k),T=Math.ceil(o.clientWidth/k),$=`${p}-${k}T23:59:59.999`}else T=Math.ceil(o.clientWidth/30);p=`${p}-01T00:00:00.000`;break;case"week":if(M="day",w=/^(?<year>\d{1,4})-(?<week>\d{2})$/.exec(p),w&&w.groups){const{year:S,week:D}=w.groups;let E=1;for(let k=1;k<=Number(D)*7;k++){const N=new Date(Date.UTC(Number(S),0,k,0,0,0));if(N.getUTCDay()===t.ruler.firstDayOfWeek&&(E++,E===Number(D))){p=N.toISOString().replace(/Z$/,""),$=`${S}-${String(N.getUTCMonth()+1).padStart(2,"0")}-${String(N.getUTCDate()+6).padStart(2,"0")}T23:59:59.999`;break}}}T=Math.ceil(o.clientWidth/7);break;case"weekday":case"day":if(M="hour",C=p.replace(/(,\w+)$/,""),p=`${C}T00:00:00.000`,w=/^(?<year>\d{1,4})-(?<month>\d{2})-(?<day>\d{2})$/.exec(C),w&&w.groups){const{year:S,month:D,day:E}=w.groups;g=Number(E)+1,$=`${S}-${D.padStart(2,"0")}-${String(g).padStart(2,"0")}T00:00:00.000`}T=60;break;case"hour":if(M="minute",C=p,p=`${C}:00:00.000`,w=/^(?<year>\d{1,4})-(?<month>\d{2})-(?<day>\d{2})T(?<hours>\d{2})$/.exec(C),w&&w.groups){const{year:S,month:D,day:E,hours:k}=w.groups;g=Number(k)+1,$=`${S}-${D.padStart(2,"0")}-${E.padStart(2,"0")}T${String(g).padStart(2,"0")}:00:00.000`}T=Math.ceil(o.clientWidth/60);break;case"minute":if(M="second",C=p,p=`${C}:00.000`,w=/^(?<year>\d{1,4})-(?<month>\d{2})-(?<day>\d{2})T(?<hours>\d{2}):(?<minutes>\d{2})$/.exec(C),w&&w.groups){const{year:S,month:D,day:E,hours:k,minutes:N}=w.groups;g=Number(N)+1,$=`${S}-${D.padStart(2,"0")}-${E.padStart(2,"0")}T${k.padStart(2,"0")}:${String(g).padStart(2,"0")}:00.000`}T=Math.ceil(o.clientWidth/60);break;case"second":if(M="millisecond",C=p,p=`${C}.000`,w=/^(?<year>\d{1,4})-(?<month>\d{2})-(?<day>\d{2})T(?<hours>\d{2}):(?<minutes>\d{2}):(?<seconds>\d{2})$/.exec(C),w&&w.groups){const{year:S,month:D,day:E,hours:k,minutes:N,seconds:_}=w.groups;g=Number(_)+1,$=`${S}-${D.padStart(2,"0")}-${E.padStart(2,"0")}T${k.padStart(2,"0")}:${N.padStart(2,"0")}:${String(g).padStart(2,"0")}.000`}T=Math.ceil(o.clientWidth/1e3);break;case"millisecond":default:M=t.scale;break}p+=t.timezone==="UTC"?"Z":"",$+=$!=="auto"&&t.timezone==="UTC"?"Z":"";const y={...t.ruler};M!=="millisecond"?y.minGrainWidth=T&&T<48?48:T:y.minGrainWidth=T&&T<30?30:T,t.ruler.hasOwnProperty("truncateLowers")&&t.ruler.truncateLowers&&(y.hasOwnProperty("top")&&y.top.rows.length>0&&(y.top.rows=fe(M,y.top.rows)),y.hasOwnProperty("bottom")&&y.bottom.rows.length>0&&(y.bottom.rows=fe(M,y.bottom.rows)));const b={prevScale:x,scale:M,start:p,end:$,ruler:y};console.log("Before Zoom!!!::",b,t.ruler),window.hasOwnProperty("SunorhcTimelineInstances")&&window.SunorhcTimelineInstances[e.id].zoom(b)};t.debug&&((f=t.extends)!=null&&f.zoomScaleTracker)&&((h=o.querySelector(".sunorhc-timeline-nodes"))==null||h.addEventListener("mousemove",u=>{const n=e.querySelector(".zoom-scale-coordinates-tracker");if(!n)return;let m=n.getAttribute("style");m=m==null?void 0:m.split(";").map($=>$.trim().replace(/^display\:\s?none$/,"display: flex"));const p=r(u.offsetX,t.scale);n.innerHTML=`<ul>            <li><label>X:</label><span style="color: blue;">${u.offsetX}</span>, <label>Y:</label><span style="color: blue;">${u.offsetY}</span></li>            <li><label>Date:</label> <span style="color: red;">${p}</span></li>            </ul>`,n.setAttribute("style",m.join("; "))}));const c=u=>{if(u.touches.length===2){const n=u.touches[0],m=u.touches[1],p=Math.hypot(n.pageX-m.pageX,n.pageY-m.pageY);u.target.dataset.initialTouchDistance=p.toString()}},l=u=>{if(u.touches.length===2){const n=u.touches[0],m=u.touches[1];if(parseFloat(u.target.dataset.initialTouchDistance||"0")>0){const $=(n.pageX+m.pageX)/2-o.getBoundingClientRect().left;a(u,$)}}},d=u=>{const n=new Date().getTime();if(n-i<=300){const p=u.changedTouches[0].pageX-o.getBoundingClientRect().left;a(u,p)}i=n};o.addEventListener("touchstart",c,{passive:!0}),o.addEventListener("touchmove",l,{passive:!0}),o.addEventListener("touchend",d,{passive:!0}),s.forEach(u=>{u.addEventListener("dblclick",n=>{const m=n.offsetX;a(n,m)})})},ge=async({url:e="",method:t="get",data:o={},datatype:s="json",timeout:i=5e3}={})=>{const r=new AbortController,a=i>0?setTimeout(()=>{r.abort()},i):null;if(!e||!/^(get|post|put|delete|patch)$/i.test(t))return Promise.reject({type:"bad_request",status:400,message:"Invalid argument(s) given."});const c=new URLSearchParams;let l={method:t,mode:"cors",cache:"no-cache",credentials:"omit",redirect:"follow",referrerPolicy:"no-referrer",signal:r.signal};if(o)for(const d in o)Object.prototype.hasOwnProperty.call(o,d)&&c.append(d,o[d]);t.toLowerCase()!=="get"?l.body=c:c.toString()&&(e+="?"+c);try{const d=await fetch(e,l);if(d.ok){const f=s==="json"?await d.json():await d.text();return Promise.resolve(f)}else{const f=await d.json();return Promise.reject({code:f.code,status:f.status||f.statusText,message:f.message})}}catch(d){d instanceof SyntaxError?console.error(`Response is not valid ${s.toUpperCase()}.`):console.error("Fetch error:",d)}finally{a&&clearTimeout(a)}},z=e=>{var s;if(!e)return 0;if(typeof e=="number")return e;const t=parseFloat(String(e)),o=(s=String(e).match(/[\d.\-\+]*\s*(.*)/))==null?void 0:s[1];if(o==="px")return t;if(o==="rem"){const i=parseFloat(getComputedStyle(document.documentElement).fontSize);return t*i}else if(o==="em"||o==="%"){const i=parseFloat(getComputedStyle(document.body).fontSize);return o==="em"?t*i:t/100*i}else{if(o==="vw")return t*window.innerWidth/100;if(o==="vh")return t*window.innerHeight/100}return 0},pe=(e,t,o)=>{const s=new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())),i=new Date(Date.UTC(t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds())),a=i.getTime()-s.getTime(),c=Math.floor(a/1e3),l=Math.floor(c/60),d=Math.floor(l/60);let f=Math.floor(d/24);const h=Math.floor(f/7),u=s.getUTCFullYear(),n=s.getUTCMonth(),m=i.getUTCFullYear(),p=i.getUTCMonth();let $=m-u,x=p-n+$*12;const M=x%12,T=new Date(s.getTime());T.setUTCFullYear(s.getUTCFullYear()+$,M,1);let w=i.getUTCDate()-T.getUTCDate();T.setUTCDate(T.getUTCDate()+w);const C=i.getUTCHours()-T.getUTCHours();T.setUTCHours(T.getUTCHours()+C);const g=i.getUTCMinutes()-T.getUTCMinutes();T.setUTCMinutes(T.getUTCMinutes()+g);const y=i.getUTCSeconds()-T.getUTCSeconds();T.setUTCSeconds(T.getUTCSeconds()+y);const b=i.getUTCMilliseconds()-T.getUTCMilliseconds();Math.max(C,g,y,b,0)>0&&(f+=1);const A={years:$+1,months:x+1,weeks:h+1,days:f,weekdays:f,hours:d,minutes:l,seconds:c,milliseconds:a};if(o&&/^(year|month|week|(week|)day|hour|minute|(milli|)second)s?$/i.test(o)){const S=o.toLowerCase(),D=S.endsWith("s")?S:S+"s";if(A.hasOwnProperty(D))return A[D]}return A},ye=(e,t)=>{const o=r=>{let a=[],c=null,l=[];for(const d in r)switch(d){case"textAlign":c=r[d].match(/^(?<alignment>(left|center|right))$/),c!=null&&c.groups.alignment&&a.push(`text-align: ${c.groups.alignment}`);break;case"textColor":a.push(`color: ${r[d]}`);break;case"textStyles":l=r[d].split(";"),Array.isArray(l)&&l.length>0&&a.push(...l);break}return a.length>0?a.join("; "):""},s=document.createElement("div");s.classList.add(`sunorhc-timeline-${e}`);let i={};if(t.display||(i.hidden="true"),t.id&&t.id!==""&&(i.id=t.id),t.flexDirection&&t.flexDirection!==""&&(i["data-flex-direction"]=/^(column|row)$/.test(t.flexDirection)?t.flexDirection:"column"),v(s,i),t.label){const r=document.createElement(e==="header"?"h2":"p");t.textClass&&t.textClass!==""&&v(r,{class:t.textClass});const a=o(t);L(r,a),X(r,t.label,!1),s.append(r)}return s},me=(e,t)=>{if(!/^(left|right)$/i.test(e))return;const o=document.createElement("div");return o.classList.add("sunorhc-timeline-sidebar"),v(o,{"data-sidebar-position":e,"data-sidebar-max-width":t.sidebarWidth.toString(),"data-sidebar-max-height":t.sidebarHeight.toString()}),L(o,`        --sidebar-max-width: ${t.sidebarWidth}px;         margin-top: ${t.sidebarOffsetTop}px;         margin-bottom: ${t.sidebarOffsetBottom}px;     `),o},je=e=>{const t=document.createElement("ul");return t.classList.add("sunorhc-timeline-sidebar-items"),v(t,{"data-alternate-rows":"true"}),e.hasOwnProperty("items")&&e.items.length>0&&e.items.forEach((o,s)=>{const i=document.createElement("li"),r=(f,h,u=!1)=>{let n="",m;h.textPosition&&h.textPosition!==""&&!u&&(m=h.textPosition.match(/^(?<valign>(center|top|bottom)?)\s+(?<halign>(center|left|right)?)$/),m!=null&&m.groups.valign&&(n+=`vertical-align: ${m.groups.valign};`),m!=null&&m.groups.halign&&(n+=`text-align: ${m.groups.halign};`)),h.textColor&&h.textColor!==""&&(n+=`color: ${h.textColor};`),h.textStyles&&h.textStyles!==""&&(n+=h.textStyles),n!==""&&L(f,n)};let a,c,l,d={tabindex:String(s+1)};switch(o.group&&o.group!==""&&(d["data-sidebar-item-group"]=o.group),o.action&&o.action!==""&&(d["data-sidebar-item-action"]=De(o.action)?`location.assign('${o.action}')`:o.action),o.onClick&&typeof o.onClick=="boolean"&&(d.onClick="Function(`return ${this.dataset.sidebarItemAction}`)()"),v(i,d),L(i,{height:String(e.itemHeight||"80px")}),!0){case/^text$/i.test(o.type):c=document.createElement("span"),v(c,{"data-sidebar-item-type":o.type,"data-text-overflow":o.textOverflow?"hidden":"static",title:o.label}),r(c,o),X(c,o.label),i.append(c);break;case/^avatar$/i.test(o.type):case/^icon$/i.test(o.type):a=document.createElement("span"),v(a,{"data-sidebar-item-type":o.type}),o.type==="avatar"?(l=new Image,l.src=o.src,L(a,{height:"100%",width:"auto"})):(l=document.createElement("i"),v(l,{class:o.iconClass||""}),l.textContent=o.iconContent||"",v(a,{class:o.iconWrapClass||""})),a.append(l),!o.label||o.label===""?i.append(a):(c=document.createElement("span"),v(c,{"data-sidebar-item-type":"text","data-text-overflow":o.textOverflow?"hidden":"static",title:o.label}),r(c,o),X(c,o.label),i.append(a,c));break;case/^image$/i.test(o.type):a=document.createElement("span"),v(a,{"data-sidebar-item-type":o.type,"data-image-src":o.src}),L(a,`--bg-image: url('${o.src}')`),!o.label||o.label===""?i.append(a):(c=document.createElement("span"),v(c,{"data-sidebar-item-type":"caption","data-caption-position":o.textPosition||"center","data-caption-color":o.textColor||"","data-caption-overflow":o.textOverflow?"hidden":"static",title:o.label}),r(c,o,!0),X(c,`<span>${o.label}</span>`,!1),i.append(a,c));break}t.append(i)}),t},we=(e,t)=>{if(!/^(top|bottom)$/i.test(e))return;const o=document.createElement("div");return o.classList.add("sunorhc-timeline-ruler"),v(o,{"data-ruler-position":e,"data-ruler-rows":String(/^top$/i.test(e)?t.rulerTopRows:t.rulerBottomRows),"data-ruler-max-cols":t.rulerMaxCols.toString(),"data-alternate-rows":"true"}),o},Ze=e=>{const t=document.createElement("ul");if(t.classList.add("sunorhc-timeline-ruler-row"),v(t,{"data-ruler-type":e.scale,"data-ruler-order":e.order.toString()}),L(t,`--min-grain-width: ${e.minGrainWidth}px;`),e.order==e.config.rows.length?(v(t,{"data-ruler-grain":e.placement==="top"?"min":"max"}),t.classList.add("last-order-row")):e.order==1&&v(t,{"data-ruler-grain":e.placement==="top"?"max":"min"}),e.hasOwnProperty("maxCols")&&e.maxCols>0){const o=document.createDocumentFragment(),s=["sun","mon","tue","wed","thu","fri","sat"];let i=0,r={},a,c;for(let l=0;l<e.maxCols;l++){const d=e.filters?e.filters.decorations:void 0,f=e.filters?e.filters.monthNames:void 0,h=e.filters?e.filters.dayNames:void 0,u=Pe(e.startDate.ts*1e3+e.startDate.milliseconds,l,e.globalScale,e.timezone),n=O(new Date(u),e.timezone,f,h,e.firstDayOfWeek);i++;let m=!1,p=e.scale.toLowerCase();switch(p=p.endsWith("s")?p.slice(0,-1):p,p){case"year":a=n==null?void 0:n.y(1),c=n==null?void 0:n.y(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-.*$/,e.timezone==="UTC");break;case"month":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}`,e.filters&&e.filters.monthFormat==="name"?c=n==null?void 0:n.mn(e.filters.abbreviateMonthNameLength||0,e.filters.fullStop||!1):c=n==null?void 0:n.m(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-.*$/,e.timezone==="UTC");break;case"week":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.w(2)}`,c=n==null?void 0:n.w(1);break;case"day":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}`,a=`${a},${s[new Date(a).getUTCDay()]}`,c=n==null?void 0:n.d(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-(?<day>\d+)T.*$/,e.timezone==="UTC");break;case"weekday":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}`,a=`${a},${s[new Date(a).getUTCDay()]}`,e.filters?c=n==null?void 0:n.wd(e.filters.abbreviateDayNameLength||0,e.filters.fullStop||!1):c=n==null?void 0:n.wd(),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-(?<day>\d+)T.*$/,e.timezone==="UTC");break;case"hour":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}T${n==null?void 0:n.h(2)}`,c=n==null?void 0:n.h(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-(?<day>\d+)T(?<hours>\d+):.*$/,e.timezone==="UTC");break;case"minute":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}T${n==null?void 0:n.h(2)}:${n==null?void 0:n.mi(2)}`,c=n==null?void 0:n.mi(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-(?<day>\d+)T(?<hours>\d+):(?<minutes>\d+):.*$/,e.timezone==="UTC");break;case"second":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}T${n==null?void 0:n.h(2)}:${n==null?void 0:n.mi(2)}:${n==null?void 0:n.s(2)}`,c=n==null?void 0:n.s(1),m=G(n==null?void 0:n.ISO,/^(?<year>\d+)-(?<month>\d+)-(?<day>\d+)T(?<hours>\d+):(?<minutes>\d+):(?<seconds>\d+).*$/,e.timezone==="UTC");break;case"millisecond":a=`${n==null?void 0:n.y(4)}-${n==null?void 0:n.m(2)}-${n==null?void 0:n.d(2)}T${n==null?void 0:n.h(2)}:${n==null?void 0:n.mi(2)}:${n==null?void 0:n.s(2)}.${n==null?void 0:n.ms(3)}`,c=n==null?void 0:n.ms(3);break}d&&d[p]&&(c=`${d[p].prefix||""}${c}${d[p].suffix||""}`,d[p].replacer&&(c=ve(d[p].replacer,c))),a&&(Object.prototype.hasOwnProperty.call(r,a)?r[a].colspan=i:(i=1,r[a]={colspan:i,content:c,presentTime:m}))}if(!J(r)){for(const l in r){const d=document.createElement("li");let f={"data-item-datetime":l};if(r[l].colspan>1){f["data-item-colspan"]=String(r[l].colspan);const h=e.minGrainWidth*r[l].colspan;f.style=`width: ${h}px;`}else f.style="width: auto;";r[l].presentTime&&(f["data-item-present-time"]="true"),e.config.rowHeight&&(f.style+=` --ruler-row-height: ${e.config.rowHeight};`),e.config.fontSize&&(f.style+=` --ruler-item-font: ${e.config.fontSize};`),e.config.textColor&&(f.style+=` --ruler-text-color: ${e.config.textColor};`),e.config.backgroundColor&&(f.style+=` --ruler-bg-color: ${e.config.backgroundColor};`),v(d,f),X(d,r[l].content,!1),o.append(d)}t.append(o)}}return t},et=e=>e.sort((t,o)=>{const s=t.hasOwnProperty("y")?t.y:0,i=o.hasOwnProperty("y")?o.y:0;if(s!==i)return i-s;const r=(t.w??1)*(t.h??1);return(o.w??1)*(o.h??1)-r}),tt=(e,t,o,s,i)=>{const r=e.hasOwnProperty("s")?e.s.ts:-1,a=e.hasOwnProperty("e")?e.e.ts:r;let c={containerSize:{width:t,height:o},eventX:e.x,eventY:e.y,eventWidth:e.w,eventHeight:e.h,eventDisplayArea:(e.w??0)*(e.h??0),startBeforeRange:e.x<0||r<s,startAfterRange:e.x>=t||r>=i,endBeforeRange:e.x+e.w<=0||a<=s,endAfterRange:e.x+e.w>t||a>i,isOutOfRange:e.x>=t||e.x+(r<a?e.w:0)<=0,eventLessThanRow:e.y<0,eventExceedingRows:e.y>=o,isOutOfRows:e.y<0||e.y>=o,isEnableEvent:!1};return c.isEnableEvent=!c.isOutOfRange&&!c.isOutOfRows,c},ot=(e,t)=>{const o=document.createDocumentFragment(),s=et(t),i=R(e),r=i.width,a=i.height,c=Number(e.dataset.rangeStart),l=Number(e.dataset.rangeEnd);s.forEach(d=>{const f=tt(d,r,a,c,l);if(!f.isEnableEvent)return;const h=document.createElement("div");h.classList.add("sunorhc-timeline-event-node","preparing"),v(h,{"data-event-id":d.eventId.toString()});const u=[`--event-node-height: ${d.h||16}px`,`--event-node-width: ${d.w||16}px`,`--event-node-y: ${d.y||0}px`,`--event-node-x: ${d.x||0}px`,`--event-node-text-color: ${d.textColor||"inherit"}`,`--event-node-bg-color: ${d.backgroundColor||"inherit"}`,`--event-node-border-width: ${d.borderWidth||1}px`,`--event-node-border-color: ${d.borderColor||"inherit"}`,`--event-node-border-radius: ${d.hasOwnProperty("end")?"2.5px":"50%"}`];L(h,u.join("; ")),d.hasOwnProperty("end")&&(h.classList.add("bar-type"),f.startBeforeRange&&h.classList.add("before-start"),f.endAfterRange&&h.classList.add("after-end"),d.hasOwnProperty("label")&&d.label!==""&&X(h,`<span>${d.label}</span>`,!1)),o.append(h),e.append(o)}),setTimeout(()=>{Array.from(e.querySelectorAll(".sunorhc-timeline-event-node")).forEach(d=>{d.classList.remove("preparing")})},100)},st=e=>{const t=e.querySelector('[data-ruler-grain="min"] > [data-item-present-time="true"]');if(!t)return;const o=t.offsetLeft,s=t.offsetWidth-1,i=e.querySelector(".sunorhc-timeline-nodes"),r=i.offsetHeight-2,a=document.createElement("div");a.classList.add("present-time-marker"),L(a,`--marker-x: ${o}px; --marker-w: ${s}px; --marker-h: ${r}px;`),i.prepend(a)},nt=e=>{if(e==null)return e;if(e!=="undefined"){if(e==="")return e;if(!isNaN(Number(e)))return parseFloat(e);if(e==="true")return!0;if(e==="false")return!1;try{const t=e.replace(/'([^']+)'/g,'"$1"').replace(/([{,]\s*)([a-zA-Z0-9_]+?)\s*:/g,'$1"$2":').replace(/,\s*}/g,"}").replace(/,\s*]/g,"]");return JSON.parse(t,(o,s)=>{if(typeof s=="string"&&s.startsWith("__FUNCTION__")){const i=s.substring(12);return new Function(`return ${i}`)()}return s})}catch{return e}}},be={display:e=>!e||!/^(boolean|number|string)$/.test(typeof e)?!1:/^(0|1|false|true)$/i.test(String(e))?/^(1|true)$/i.test(String(e)):!1,label:e=>!e||typeof e!="string"?void 0:e,id:e=>!e||typeof e!="string"?void 0:e,flexDirection:e=>!e||typeof e!="string"||!/^(column|row)$/.test(e)?"column":e,textAlign:e=>!e||typeof e!="string"||!/^(left|center|right)$/i.test(e)?void 0:e,textColor:e=>!e||typeof e!="string"?void 0:e,textStyles:e=>!e||typeof e!="string"?void 0:e,textClass:e=>!e||typeof e!="string"?void 0:e},it={type:e=>!e||typeof e!="string"||!/^(text|avatar|image)$/i.test(e)?"text":e,label:e=>!e||typeof e!="string"?"":e,group:e=>!e||typeof e!="string"?void 0:e,src:e=>!e||typeof e!="string"?void 0:e,action:e=>!e||typeof e!="string"?void 0:e,onClick:e=>!e||!/^(boolean|number|string)$/.test(typeof e)?void 0:/^(0|1|false|true)$/i.test(String(e))?/^(1|true)$/i.test(String(e)):!1,textOverflow:e=>!e||!/^(boolean|number|string)$/.test(typeof e)?!1:/^(0|1|false|true)$/i.test(String(e))?/^(1|true)$/i.test(String(e)):!1,textPosition:e=>!e||typeof e!="string"||!/^(top|center|bottom)?(\s+)?(left|center|right)?$/i.test(e)?void 0:e,textColor:e=>!e||typeof e!="string"?void 0:e,textStyles:e=>!e||typeof e!="string"?void 0:e,iconClass:e=>!e||typeof e!="string"?void 0:e,iconContent:e=>!e||typeof e!="string"?void 0:e,iconWrapClass:e=>!e||typeof e!="string"?void 0:e},rt={placement:e=>!e||typeof e!="string"||!/^(both|left|right|none)$/i.test(e)?"both":e.toLowerCase(),sticky:e=>!e||typeof e!="boolean"?!1:e,overlay:e=>!e||typeof e!="boolean"?!1:e,width:e=>!e||!/^(number|string)$/.test(typeof e)?"150px":/^\d+(|px)$/.test(String(e))?e:"150px",itemHeight:e=>!e||!/^(number|string)$/.test(typeof e)?"80px":/^\d+(|px)$/.test(String(e))?e:"80px",items:e=>!e||!Array.isArray(e)||e.length==0?[]:e.map(t=>H(t,it))},at={decorations:e=>!e||typeof e!="object"?void 0:e,monthFormat:e=>!e||typeof e!="string"||!/^(numeric|name)$/.test(e)?void 0:e,monthNames:e=>!e||!Array.isArray(e)?void 0:e.length>0?e:void 0,dayNames:e=>!e||!Array.isArray(e)?void 0:e.length>0?e:void 0,abbreviateMonthNameLength:e=>!e||typeof e!="number"?void 0:e,abbreviateDayNameLength:e=>!e||typeof e!="number"?void 0:e,fullStop:e=>typeof e=="boolean"?e:void 0,dayBackgroundColor:e=>typeof e=="boolean"?e:void 0},Te={rows:e=>!e||!Array.isArray(e)||e.length==0?["day"]:e,rowHeight:e=>!e||!/^(number|string)$/.test(typeof e)?"24px":/^\d+(|px)$/.test(String(e))?e:"24px",fontSize:e=>!e||!/^(number|string)$/.test(typeof e)?"16px":/^\d+(|px)$/.test(String(e))?e:"16px",textColor:e=>!e||typeof e!="string"?void 0:e,backgroundColor:e=>!e||typeof e!="string"?void 0:e},lt={placement:e=>!e||typeof e!="string"||!/^(both|top|bottom|none)$/i.test(e)?"both":e.toLowerCase(),truncateLowers:e=>typeof e=="boolean"?e:!1,firstDayOfWeek:e=>!e||typeof e!="number"?0:e>6?6:e<0?0:Math.floor(e),minGrainWidth:e=>!e||!/^(number|string)$/.test(typeof e)?"48px":/^\d+(|px)$/.test(String(e))?e:"48px",filters:e=>!e||typeof e!="object"?void 0:H(e,at),top:e=>!e||typeof e!="object"?{rows:["day"]}:H(e,Te),bottom:e=>!e||typeof e!="object"?{rows:["day"]}:H(e,Te)},ct={before:e=>!e||!/^(string|number)$/.test(typeof e)?"":e,after:e=>!e||!/^(string|number)$/.test(typeof e)?"":e,lineSize:e=>!e||typeof e!="number"?void 0:e,lineColor:e=>!e||typeof e!="string"?void 0:e,curve:e=>typeof e=="boolean"||e&&/^((l|r)(t|b)|s|z|n|u|auto)$/.test(String(e))?e:!1},Ce={eventId:e=>!e||typeof e!="string"?void 0:e,uid:e=>e||void 0,x:e=>e||void 0,y:e=>e||void 0,w:e=>e||void 0,h:e=>e||void 0,s:e=>e||void 0,e:e=>e||void 0,start:e=>!e||typeof e!="string"?"":e,end:e=>!e||typeof e!="string"?void 0:e,row:e=>!e||typeof e!="number"?0:e,group:e=>!e||typeof e!="string"?void 0:e,label:e=>!e||typeof e!="string"?void 0:e,content:e=>!e||typeof e!="string"?void 0:e,textColor:e=>!e||typeof e!="string"?void 0:e,backgroundColor:e=>!e||typeof e!="string"?void 0:e,borderColor:e=>!e||typeof e!="string"?void 0:e,borderWidth:e=>!e||typeof e!="number"?void 0:e,classes:e=>!e||typeof e!="string"?void 0:e,styles:e=>!e||typeof e!="string"?void 0:e,image:e=>!e||typeof e!="string"?void 0:e,size:e=>!e||!/^(string|number)$/.test(typeof e)?"md":/^(([+-]?(\d+(\.\d*)?|\.\d+)([eE][+-]?\d+)?)|xs|sm|md|lg|xl)$/i.test(String(e))?e:"md",remote:e=>!e||typeof e!="boolean"?!1:e,expiration:e=>!e||!/^(string|number)$/.test(typeof e)?"always":/^(\d+|always|none)$/i.test(String(e))?e:"always",relation:e=>!e||typeof e!="object"?void 0:H(e,ct),extends:e=>!e||typeof e!="object"?void 0:e,callback:e=>!e||typeof e!="function"?void 0:e},dt={elevation:e=>!e||typeof e!="number"?0:e>4?4:e,outlined:e=>!e||typeof e!="string"||!/^(outside|inside|both|none)$/.test(e)?"inside":String(e),outlineCorner:e=>!e||typeof e!="string"||!/^(rounded|squared)$/.test(e)?"squared":String(e),outlineStyle:e=>!e||typeof e!="string"||!/^(solid|dotted|none)$/.test(e)?"solid":String(e),hideScrollbar:e=>typeof e=="boolean"?e:!0,eventsBackground:e=>!e||typeof e!="string"||!/^(striped|grid|toned|plaid|none)$/.test(e)?"plaid":String(e),width:e=>!e||!/^(number|string)$/.test(typeof e)?"auto":typeof e=="number"||/^(\d+(px|%|vw)|auto|inherit|(max|min|fit)-content)$/.test(e)?e:"auto",height:e=>!e||!/^(number|string)$/.test(typeof e)?"auto":typeof e=="number"||/^(\d+(px|%|vh)|auto|inherit|(max|min|fit)-content)$/.test(e)?e:"auto",rtl:e=>typeof e=="boolean"?e:!1},ht={presentTime:e=>typeof e=="boolean"?e:!1,defaultAlignment:e=>!e||!/^(string|number)$/.test(typeof e)||!/^(\d+|left|begin|center|right|end|current(|ly)|latest)$/i.test(String(e))?"latest":typeof e=="string"?e.toLowerCase():e,cacheExpiration:e=>!e||!/^(string|number)$/.test(typeof e)||!/^(\d+|always|none)$/i.test(String(e))?"always":e,hoverEvent:e=>typeof e=="boolean"?e:!1,onClickEvent:e=>!e||typeof e!="string"||!/^(normal|modal|custom|none)$/i.test(e)?"normal":e},ft={name:e=>!e||typeof e!="string"?void 0:e,hookChangeModeClass:e=>!e||typeof e!="string"?void 0:e},ut={start:e=>e||"currently",end:e=>e||"auto",timezone:e=>e||"UTC",scale:e=>!e||typeof e!="string"||!/^(year|month|week|(week|)day|hour|minute|second|millisecond)$/i.test(e)?"day":e.toLowerCase(),file:e=>e&&typeof e=="string"?e:void 0,header:e=>!e||typeof e!="object"?{display:!1}:H(e,be),footer:e=>!e||typeof e!="object"?{display:!1}:H(e,be),sidebar:e=>!e||typeof e!="object"?{placement:"both",sticky:!1,overlay:!1,width:"150px",itemHeight:"80px",items:[]}:H(e,rt),ruler:e=>!e||typeof e!="object"?{placement:"both",minGrainWidth:"48px"}:H(e,lt),events:e=>!e||!/^(string|object)$/.test(typeof e)?[]:Array.isArray(e)?e.map(t=>H(t,Ce)):typeof e=="string"?e:[],layout:e=>!e||typeof e!="object"?void 0:H(e,dt),effects:e=>!e||typeof e!="object"?{presentTime:!1,defaultAlignment:"latest",cacheExpiration:"always",hoverEvent:!0,onClickEvent:"normal"}:H(e,ht),theme:e=>!e||typeof e!="object"?void 0:H(e,ft),useStorage:e=>!e||typeof e!="string"||!/^(session|local)Storage$/i.test(e)?"sessionStorage":e,zoomable:e=>typeof e=="boolean"?e:!1,debug:e=>typeof e=="boolean"?e:!1,extends:e=>!e||typeof e!="object"?void 0:e},H=(e,t)=>{const o={},s=t||ut;for(const i in e)if(i in s&&typeof s[i]=="function"){const r=s[i](e[i]);r!==void 0&&(o[i]=r)}else console.warn(`Property "%c${i}%c" is not defined in the TimelineOptions interface and will be ignored.`,"color:red;font-weight:bold;","");return o};class gt{trace(...t){console.trace(...t)}debug(...t){console.debug(...t)}info(...t){console.info(...t)}error(...t){console.error(...t)}}class pt{constructor(t){F(this,"logger");F(this,"debug");this.debug=t.debug;const o=[];t.debug&&o.push({target:"pino-pretty",options:{colorize:!0},level:"debug"}),t.logFilePath&&o.push({target:"pino/file",options:{destination:`@/../logs/${t.logFilePath}`,mkdir:!0},level:this.debug?"trace":"info"});try{const s=require("pino");this.logger=s({level:this.debug?"trace":"info",transport:{targets:o}})}catch{this.logger=new gt}}log(...t){this.debug?this.logger.trace(...t):this.logger.debug(...t)}info(...t){this.logger.info(...t)}error(...t){this.logger.error(...t)}}const Se=!1,yt="prod-log.log",mt={start:"currently",end:"auto",timezone:"UTC",scale:"day",file:null,header:{display:!1},footer:{display:!1},sidebar:{placement:"both",sticky:!1,overlay:!1,width:"150px",itemHeight:"80px",items:[]},ruler:{placement:"both",truncateLowers:!1,firstDayOfWeek:0,minGrainWidth:"48px",top:{rows:["day"]},bottom:{rows:["day"]}},events:"",layout:{hideScrollbar:!0,eventsBackground:"plaid",width:"auto",height:"auto"},effects:{presentTime:!1,defaultAlignment:"latest",cacheExpiration:"always",hoverEvent:!0,onClickEvent:"normal"},theme:{name:"default"},useStorage:"sessionStorage",zoomable:!1,debug:Se},Q=class Q{constructor(t,o){F(this,"elementId");F(this,"targetElement");F(this,"fragmentNode");F(this,"options",mt);F(this,"inputOptions");F(this,"loadOptions",null);F(this,"measurements",{});F(this,"eventNodes",[]);F(this,"logger");this.elementId=t,this.targetElement=document.querySelector(`#${t}`),this.fragmentNode=document.createDocumentFragment(),this.inputOptions=o;const s={debug:(Object.prototype.hasOwnProperty.call(this.inputOptions,"debug")?this.inputOptions.debug:Se)||!1,logFilePath:yt};this.logger=new pt(s)}static async create(t,o){const s=new Q(t,o);try{s.options=await Promise.resolve(s.initOptions()),s.measurements=await Promise.resolve(s.initMeasure()),await Promise.resolve(s.render()),s.initialized(),await Promise.resolve(s.serveEventNodes()),s.registerEventListeners(),s.runChangeThemeWatcher()}catch(i){console.error("Failed to create timeline:",i),L(s.targetElement,{display:"none"})}finally{window.hasOwnProperty("SunorhcTimelineInstances")||(window.SunorhcTimelineInstances={}),window.SunorhcTimelineInstances[s.elementId]=s}return s}async initOptions(){let t=B({},this.options);if(this.targetElement.dataset.options){const o=nt(this.targetElement.dataset.options);if(Y(o)){const s=H(o);t=B(t,s)}else typeof o=="string"&&(t=B(t,{file:o}))}if(this.inputOptions&&Y(this.inputOptions)&&!J(this.inputOptions)&&(t=B(t,this.inputOptions),this.inputOptions.start instanceof Date&&(t.start=this.inputOptions.start),this.inputOptions.end instanceof Date&&(t.end=this.inputOptions.end)),t.hasOwnProperty("file")&&typeof t.file=="string"&&t.file!==""){const o=await ge({url:t.file});t=B(t,H(o)),this.logger.log("Fetched options file:",o,H(o),t)}return this.logger.info(`%cSnorch.Timeline ver.${Q.VERSION} is booting now...`,"color: #0284c7; font-weight: 700;"),t}getOptions(t=!1){return t?V(this.options):this.options}async initMeasure(){var a,c,l,d,f,h,u,n,m,p,$,x,M,T,w,C;const t=document.createElement("div");t.classList.add("sunorhc-timeline-container","preparing");const o={"data-timeline-outlined":this.options.layout&&/^(outside|both)$/.test(this.options.layout.outlined)?"true":"false"};this.options.layout.outlineCorner&&(o["data-timeline-linestyle"]=this.options.layout.outlineCorner),this.options.layout.elevation&&(o["data-timeline-elevation"]=this.options.layout.elevation.toString()),this.options.layout.rtl&&(o.dir=this.options.layout.rtl?"rtl":"ltr"),v(t,o);const s=this.options.layout.width||"auto",i=this.options.layout.height||"auto",r=["width: "+(typeof s=="number"?`${s}px`:s),"height: "+(typeof i=="number"?`${i}px`:i)];this.options.layout.outlineStyle&&r.push(`--outline-style: ${this.options.layout.outlineStyle}`),L(t,r.join("; ")),this.fragmentNode.append(t),this.targetElement.append(this.fragmentNode);try{const g=We(this.options.start,this.options.timezone,this.options.scale);if(g instanceof Error)throw g;const y=Ye(this.options.end,this.options.timezone,this.options.scale,g);if(y instanceof Error)throw y;const b=((a=this.options.ruler.filters)==null?void 0:a.monthNames)??void 0,A=((c=this.options.ruler.filters)==null?void 0:c.dayNames)??void 0,S=this.options.ruler.firstDayOfWeek||0,D=O(g,this.options.timezone,b,A,S),E=O(y,this.options.timezone,b,A,S),k=pe(g,y),N=pe(g,y,this.options.scale),_=R(this.targetElement),q=Le(R(t)),U=z(this.options.sidebar.width),I=z(this.options.sidebar.itemHeight),wt=((d=(l=this.options.ruler.top)==null?void 0:l.rows)==null?void 0:d.length)||0,bt=((h=(f=this.options.ruler.bottom)==null?void 0:f.rows)==null?void 0:h.length)||0,$e=z((u=this.options.ruler.top)==null?void 0:u.rowHeight)||24,Ue=z((n=this.options.ruler.bottom)==null?void 0:n.rowHeight)||24;let j={startDate:D,endDate:E,particles:k,injectTo:_,container:q,containerWidth:q.width,containerHeight:q.height,containerTop:q.top,containerLeft:q.left,bodyHeight:void 0,sidebarWidth:U,sidebarHeight:I*this.options.sidebar.items.length,sidebarVisibleHeight:void 0,sidebarOffsetTop:/^(both|top)/i.test(this.options.ruler.placement)?wt*$e:0,sidebarOffsetBottom:/^(both|bottom)/i.test(this.options.ruler.placement)?bt*Ue:0,sidebarItemHeight:I,sidebarItems:this.options.sidebar.items.length,rulerVisibleWidth:q.width-(/^both$/i.test(this.options.sidebar.placement)?U*2:/^(left|right)$/i.test(this.options.sidebar.placement)?U:0),rulerActualWidth:z(this.options.ruler.minGrainWidth)*N,rulerTopRows:((p=(m=this.options.ruler.top)==null?void 0:m.rows)==null?void 0:p.length)||0,rulerBottomRows:((x=($=this.options.ruler.bottom)==null?void 0:$.rows)==null?void 0:x.length)||0,rulerTopHeight:(((T=(M=this.options.ruler.top)==null?void 0:M.rows)==null?void 0:T.length)||0)*$e,rulerBottomHeight:(((C=(w=this.options.ruler.bottom)==null?void 0:w.rows)==null?void 0:C.length)||0)*Ue,rulerMaxCols:N};if(this.logger.log("initMeasure:",this.elementId,this.options,j),j.sidebarItems==0||j.rulerTopRows+j.rulerBottomRows==0)throw new Error("Missing several configurations to generate timeline.");return Promise.resolve(j)}catch(g){return Promise.reject(g)}}async render(){var A;const t=V(this.measurements),o=S=>S.filter(D=>!!D);let s=null;const i=ye("header",this.options.header),r=document.createElement("div");r.classList.add("sunorhc-timeline-body"),v(r,{"data-timeline-outlined":this.options.layout&&/^(inside|both)$/.test(this.options.layout.outlined)?"true":"false","data-timeline-linestyle":this.options.layout?this.options.layout.outlineCorner:""}),this.options.layout&&this.options.layout.outlineStyle&&L(r,`--outline-style: ${this.options.layout.outlineStyle}`);const a={left:/^(both|left)$/i.test(this.options.sidebar.placement)?me("left",t):void 0,right:/^(both|right)$/i.test(this.options.sidebar.placement)?me("right",t):void 0};for(const S in a)if(a.hasOwnProperty(S)&&a[S]&&te(a[S])){const D=je(this.options.sidebar);this.options.ruler.placement==="bottom"&&this.options.layout.outlined==="inside"&&L(D,{borderTop:"none"}),a[S].append(D)}const c=document.createElement("div");c.classList.add("sunorhc-timeline-main-canvas"),this.options.layout.hideScrollbar&&v(c,{"data-hide-scrollbar":"true"});const l=[`--main-visible-width: ${t.rulerVisibleWidth}px`];this.options.ruler.placement==="bottom"&&this.options.layout.outlined==="both"&&l.push(`border-top: ${((A=this.options.layout)==null?void 0:A.outlineStyle)||"solid"} 1px var(--border-color)`),L(c,l.join("; "));const d={top:/^(both|top)$/i.test(this.options.ruler.placement)?we("top",t):void 0,bottom:/^(both|bottom)$/i.test(this.options.ruler.placement)?we("bottom",t):void 0};for(const S in d)d.hasOwnProperty(S)&&d[S]&&te(d[S])&&this.options.ruler.hasOwnProperty(S)&&(S==="top"?this.options.ruler.top.rows:this.options.ruler.bottom.rows).forEach((E,k)=>{const N={globalScale:this.options.scale,timezone:this.options.timezone,scale:E,order:k+1,minGrainWidth:z(this.options.ruler.minGrainWidth),placement:S,firstDayOfWeek:this.options.ruler.firstDayOfWeek,config:S==="top"?this.options.ruler.top:this.options.ruler.bottom,filters:this.options.ruler.filters,maxCols:t.rulerMaxCols,startDate:t.startDate,endDate:t.endDate};d[S].append(Ze(N)),this.options.ruler.filters&&this.options.ruler.filters.dayBackgroundColor&&d[S].classList.add("force-day-bg-color")});const f=document.createElement("div");f.classList.add("sunorhc-timeline-nodes"),v(f,{"data-grid-width":z(this.options.ruler.minGrainWidth).toString(),"data-grid-height":t.sidebarItemHeight.toString(),"data-grid-max-cols":t.rulerMaxCols.toString(),"data-grid-max-rows":t.sidebarItems.toString(),"data-range-start":t.startDate.ts.toString(),"data-range-end":t.endDate.ts.toString(),"data-background":this.options.layout.eventsBackground||"plaid"});let h=/^(both|top)$/.test(this.options.ruler.placement)?t.rulerTopHeight:0;h+=/^(both|bottom)$/.test(this.options.ruler.placement)?t.rulerBottomHeight:0;const u=Math.floor(z(this.options.ruler.minGrainWidth)),n=Math.floor(t.sidebarItemHeight);L(f,`      --canvas-grid-width: ${u}px;       --canvas-grid-height: ${n}px;       --canvas-grid-cols: ${t.rulerMaxCols};       --canvas-grid-rows: ${t.sidebarItems};       --canvas-grid-rows-half: ${t.sidebarItems/2};       --canvas-grid-interval: -1px;       width: ${t.rulerActualWidth}px;       height: calc(100% - ${h}px);     `),s=o([d.top,f,d.bottom]),c.append(...s);const p=ye("footer",this.options.footer);s=o([a.left,c,a.right]),r.append(...s),s=o([i,r,p]),this.fragmentNode.append(...s);const $=this.targetElement.querySelector(".sunorhc-timeline-container");$.append(this.fragmentNode);const x=R(r,"height"),M=t.sidebarHeight+(t.sidebarOffsetTop+t.sidebarOffsetBottom),T=x<M?Math.floor(x):M;t.bodyHeight=T,t.sidebarVisibleHeight=T-(t.sidebarOffsetTop+t.sidebarOffsetBottom);const w=$.querySelector(".sunorhc-timeline-nodes"),C=Array.from($.querySelectorAll(".sunorhc-timeline-ruler"));let g;if(t.sidebarVisibleHeight<t.sidebarHeight){const S=[`--sidebar-max-width: ${t.sidebarWidth}px`,`--sidebar-max-height: ${t.sidebarVisibleHeight}px`,`margin-top: ${t.sidebarOffsetTop}px`,`margin-bottom: ${t.sidebarOffsetBottom}px`];v(Array.from($.querySelectorAll(".sunorhc-timeline-sidebar")),{"data-sidebar-overflow":"true",style:S.join("; ")}),g=K(w,"style").split(";").filter(D=>D!=="").map(D=>{const E=D.trim();return/^height\:/.test(E)?`height: ${t.sidebarHeight}px`:E}),C.forEach(D=>{const E=K(D,"data-ruler-position");v(D,{"data-overlay-sticky":E})}),L(w,g.join("; "))}else{g=K(w,"style").split(";").filter(E=>E!=="").map(E=>{const k=E.trim();return/^height\:/.test(k)?`height: ${t.sidebarHeight+2}px`:k}),L(w,g.join("; "));const S=$.querySelector(".sunorhc-timeline-body");let D=0;C.forEach(E=>{const k=Math.ceil(R(E,"height"));L(E,{height:`${k}px`}),D+=k}),L(S,{height:`${Math.floor(D+t.sidebarHeight)}px`})}const y=R(C.filter(S=>S.dataset.rulerPosition==="top")[0],"height");Array.from($.querySelectorAll(".sunorhc-timeline-sidebar")).forEach(S=>{const D=y-z(S.style.marginTop),E=K(S,"style");v(S,{style:`--sidebar-adjust-top: ${D}px; ${E}`})}),this.measurements=t,$.classList.remove("preparing")}async serveEventNodes(t=!1){const o=`${this.elementId}:cachedEvents`;let s=null,i=[];t&&this.logger.log("Force clear cache!");try{if(typeof this.options.events=="string"&&this.options.events!==""){if(this.options.events===o){let r=-1;/^\d+$/i.test(String(this.options.effects.cacheExpiration))?r=Number(this.options.effects.cacheExpiration):/^always$/i.test(String(this.options.effects.cacheExpiration))&&(r=0),s=Ge(this.options.useStorage,o,r),s!==null&&Array.isArray(s)&&s.length!==0&&(this.logger.log("Loaded cached event data:",s),this.options.events=s)}if(!Y(this.options.events)&&this.options.events!==o){if(s=await ge({url:this.options.events}),!s||!Array.isArray(s)||s.length==0)throw new Error("The fetched data does not contain any event nodes.");this.logger.log("Fetched external event data:",s),this.options.events=s}}else if(Array.isArray(this.options.events)&&this.options.events.length==0)throw new Error("No enabled events within the current timeline display range.");if(!J(this.options.events)){this.eventNodes=[],this.options.events.forEach((a,c)=>{var d,f;let l=H(a,Ce);if(l.hasOwnProperty("eventId"))i.push(l.eventId);else{const h=`EventNode:${String(c+1)}`;l.eventId=h,i.push(h)}if(l.hasOwnProperty("start")){const h=((d=this.options.ruler.filters)==null?void 0:d.monthNames)??void 0,u=((f=this.options.ruler.filters)==null?void 0:f.dayNames)??void 0,n=this.options.ruler.firstDayOfWeek||0,m=O(l.start,this.options.timezone,h,u,n);if(m){l.s=m;const p=qe(l,this.options,this.measurements);this.eventNodes.push(p)}}});const r=ke(i);r.length>0&&r.forEach(a=>{let c=0;for(let l of this.eventNodes){const d=l;d.eventId===a&&(c++,c>1&&(d.eventId=`EventNode:${String(d.uid)}`))}}),Oe(this.options.useStorage,o,this.options.events,!0),this.options.events=o}}catch(r){console.warn(r)}finally{const r=this.targetElement.querySelector(".sunorhc-timeline-nodes");ot(r,this.eventNodes),this.logger.log("serveEventNodes:",this.eventNodes,this.options.events,this.options.effects.presentTime),this.options.effects.presentTime&&st(this.targetElement)}}runChangeThemeWatcher(){var o;const t=this.targetElement.querySelector(".sunorhc-timeline-container");window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?t.classList.add("dark-theme"):t.classList.remove("dark-theme"),(o=window==null?void 0:window.matchMedia("(prefers-color-scheme: dark)"))==null||o.addEventListener("change",s=>{s.matches?t.classList.add("dark-theme"):t.classList.remove("dark-theme")}),Re(document.body,s=>{const i=s;i.type==="attributes"&&i.attributeName==="class"&&(i.target.classList.contains(this.options.theme.hookChangeModeClass)?t.classList.add("dark-theme"):t.classList.remove("dark-theme"))},{attributes:!0,childList:!1,subtree:!1})}registerEventListeners(){const t=V(this.measurements);this.logger.log("registerEventListeners:",t),t.rulerActualWidth>t.rulerVisibleWidth&&(Je(this.targetElement),ue(this.targetElement,this.options.effects.defaultAlignment)),t.sidebarHeight>t.sidebarVisibleHeight&&Ve(this.targetElement),this.options.zoomable&&Qe(this.targetElement,this.options),Ke(this.targetElement,this.eventNodes)}async initialized(t){t&&(this.logger.log('Callbackable "initialized" hook:'),await Promise.resolve(t(this)))}async reload(t,o){this.logger.log('Called "reload"',this.targetElement);const s=R(this.targetElement),i=K(this.targetElement,"style");L(this.targetElement,`min-width: ${s.width}px; min-height: ${s.height}px; ${i}`),X(this.targetElement,"",!1);try{if(t){const r=B(this.options,t);t.hasOwnProperty("start")&&t.start instanceof Date&&(r.start=t.start),t.hasOwnProperty("end")&&t.end instanceof Date&&(r.end=t.end),this.options=r}else this.options=await Promise.resolve(this.initOptions());this.measurements=await Promise.resolve(this.initMeasure()),await Promise.resolve(this.render()),this.initialized(),await Promise.resolve(this.serveEventNodes()),this.registerEventListeners(),this.runChangeThemeWatcher()}catch(r){console.error("Failed to create timeline:",r),L(this.targetElement,{display:"none"})}finally{o&&await Promise.resolve(o(this))}}async align(t,o){ue(this.targetElement,t),o&&await Promise.resolve(o(this))}async zoom(t,o){if(typeof t!="object"||typeof t.scale!="string"||typeof t.start!="string"&&!(t.start instanceof Date))return Promise.reject(new Error("Invalid zoom option."));console.log("zoom!!!:",this.options.scale,"->",t.scale,t),this.reload({start:t.start,end:t.end,scale:t.scale,ruler:t.ruler}),o&&await Promise.resolve(o(this))}};F(Q,"VERSION",P);let se=Q;W.Timeline=se,Object.defineProperty(W,Symbol.toStringTag,{value:"Module"})});
